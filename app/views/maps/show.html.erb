<% content_for :bottom_inline_javascripts do %>
  <%= javascript_include_tag 'http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places' %>
<% end %>

<div class='row-fluid js-header-content'>
  <div class='span12 page-header'>
    <h1>
      <%= t('map.map') %> <small>There will be some settings</small>

      <div class='input-prepend pull-right'>
        <span class='add-on'><i class='icon-search'></i></span>
        <%= text_field_tag :search, nil, placeholder: t('map.search_placeholder') %>
      </div>

      <%= link_to t('map.show_kml'), generate_kml_maps_path, class: 'pull-right btn btn-success btn-small js-generate-kml', style: 'margin-right: 10px;' %>
    </h1>
  </div>
</div>

<div class='row-fluid page-content js-page-content'>
  <div class='span3'>
    <div class='well'>
      <div class='table-devices'>
        <table class='table table-striped'>
          <thead>
            <tr>
              <th><%= check_box_tag 'devices' %></th>
              <th><%= t('devices.name') %></th>
              <th><%= t('devices.number') %></th>
            </tr>
          </thead>
          <tbody>
            <% @devices.each do |device| %>
              <tr>
                <td><%= check_box_tag 'device_ids[]', device.id %></td>
                <td><%= device.name %></td>
                <td><%= device.number %></td>
              </tr>
            <% end %>

            <% if @devices.empty? %>
              <tr><td colspan='4'><%= t('devices.not_found') %></td></tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class='span9'>
    <div class='well'>
      <div id='google-map'></div>
    </div>
  </div>
</div>
